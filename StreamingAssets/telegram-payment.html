<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
    // JavaScript function to initiate Telegram payment
    function InitiateTelegramPayment() {
        Telegram.WebApp.ready(); // Ensure Telegram WebApp is ready
        console.log("Initiating payment...");

        Telegram.WebApp.pay({
            provider_token: '1877036958:TEST:96f49063b925b6f268c41149a41979c8f4c30955',
            currency: 'USD',
            prices: [{ label: '5 Stars', amount: 500 }],
            payload: 'PAYLOAD_STARS_5',
            title: 'Buy 5 Stars',
            description: 'Purchase 5 Stars for your game'
        });
    }

    // Listen for payment success or failure
    Telegram.WebApp.onEvent('payment_success', function () {
        console.log('Payment successful!');
        gameInstance.SendMessage('PaymentManager', 'OnPaymentSuccess', 'payment_success');
    });

    Telegram.WebApp.onEvent('payment_failure', function () {
        console.log('Payment failed.');
        gameInstance.SendMessage('PaymentManager', 'OnPaymentFailure', 'payment_failure');
    });
</script>
